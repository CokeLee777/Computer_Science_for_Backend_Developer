## 프로세스와 스레드

### 프로세스(Process)란 무엇인가?

프로세스는 실행중인 프로그램을 뜻한다. 프로그램은 하드디스크 등의 저장공간에 저장되어 있는 코드와 리소스 등이 집합되어 있는 파일을 말하고, 실행하면 메모리에 적재되어 프로세스로 동작한다. 구체적으로 살펴보면 프로세스는 함수의 매개변수, 복귀 주소와 지역 변수와 같은 임시 자료를 갖는 프로세스 스택과 전역 변수들을 저장하는 데이터 섹션을 포함한다. 또한 프로세스는 실행중에 동적으로 할당되는 메모리인 힙 영역도 포함한다.

#### 프로세스 제어 블록(Process Control Block, PCB)

PCB는 특정 프로세스에 관한 정보를 저장하고 있는 운영체제 커널의 자료구조이다. 프로세스는 생성과 동시에 자신의 고유한 PCB를 생성한다. 프로세스는 작업을 하다가 프로세스 전환이 발생하면 작업을 저장하고 CPU를 반환해야 하는데, 이 때 자신의 PCB에 작업에 관한 정보를 저장하게 된다. 그리고 다시 CPU를 할당받게 되면 PCB로 부터 작업 정보들을 가져와서 수행하게 된다.

PCB에 저장되는 정보는 다음과 같다.

- 프로세스 식별자(Process ID, PID): 프로세스 식별번호
- 프로세스 상태: 생성(New), 준비(Ready), 실행(Running), 대기(Waiting), 완료(Terminated) 상태를 저장
- 프로그램 카운터(Program Counter, PC): 프로세스가 다음으로 실행할 명령어의 주소를 가리킨다.
- CPU 레지스터
- CPU 스케줄링 정보: 프로세스의 우선순위, 최종 실행시각, CPU 점유시간 등
- 메모리 관리 정보: 해당 프로세스의 주소공간 등
- 프로세스 계정 정보
- 입출력 상태 정보: 프로세스에 할당된 입출력장치 목록 등

### 스레드(Thread)란 무엇인가?

스레드는 프로세스의 실행 단위를 뜻하고, 프로세스 내의 주소공간이나 자원을 공유할 수 있다. 일반적으로 한 프로그램은 하나의 스레드를 가지고 있지만 프로그램 환경에 따라서 둘 이상의 스레드를 동시에 실행할 수 있다. 이러한 실행방식을 **멀티스레드(MultiThread)**라고 한다. 이 경우 각각의 스레드는 독립적인 작업을 수행해야 하기 때문에 각자의 스택과 PC 레지스터 값을 가지고 있다.

## 동기와 비동기의 차이

### 동기와 비동기란?

비유적으로 설명하면 다음과 같다. 만약 해야할 일이 빨래, 설거지, 청소가 있다고 가정한다. 이 일들을 동기적으로 처리한다면 내가 정해둔 순서대로 빨래를 한다음 설거지를 하고 청소를 할 것이다. 그런데 이 일을 비동기적으로 처리한다면 빨래 업체에게 빨래를 시키고 설거지 대행 업체에 설거지를 시키고, 청소 대행 업체에 청소를 시킨다. 이 때, 어느 작업이 먼저 완료될지는 알 수 없다. 그리고 일을 맡긴 다음에는 나는 다른 업무를 수행할 수 있다. 이렇게 처리하는 것을 비동기라고 한다.

일반적으로 동기와 비동기의 차이는 메소드를 실행시킴과 동시에 반환값이 기대되는 경우에는 동기라고 표현하고, 그렇지 않은 경우에 대해서는 비동기라고 표현한다. 동시에 라는 것은 실행되었을 때 값이 반환되기 전까지, 즉 메소드가 종료되기 전까지는 blocking 되어 있다는 것을 의미한다. 비동기의 경우, blocking 되지 않고 이벤트 큐에 넣거나 백그라운드 스레드 에게 해당 작업을 위임하고 바로 다음 코드를 실행하기 때문에 기대되는 값이 바로 반환되지 않는다.
